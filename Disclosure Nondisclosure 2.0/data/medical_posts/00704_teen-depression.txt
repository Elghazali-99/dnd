My stepdaughter was diagnosed with borderline personality disorder a couple of months ago after she ran away.  She was missing for just a short time and had cut herself (on purpose) while she was missing.  She had been caught smoking by her stepfather at her mothers house and was unhappy with all of her parents so decided to leave.  She just didn't have enough forethought to plan where to go, so she was thankfully found and returned home.
She was diagnosed with BPD and is taking an anti-depressant and a low-dose mood stabilizer to help with it.  She also very irregularly sees a counselor, about once every two weeks.  We continue to have problems.
Her dad has primary custody and she sees her mom every other weekend and once a week.  Through our research into BPD, we are almost positive that her mom is undiagnosed BPD to a very extreme degree.  The mom is self medicating with alcohol to the extent of 3-4 beers a night, she is very instable with relationships, blah, blah, blah.  My stepdaughter hits all the criteria to a less extent, her mom hits all the criteria to a major extent.
So, here's the problem:
My stepdaughter continues to sneak smoking, we learned recently she's starting to snitch alcohol (we lock it up in our house), she lies, and has some very destructive, but typical BPD behaviors.  We can't make any progress, in fact it seems to be getting worse, because what ever we do here to help her, is counteracted MASSIVELY over at her mothers house.  To the point where she came home tonight and said the only place where she is happy is at her mom's (where she is pretty much free to do what she pleases) and we are making her miserable.  For example: We tell her not to hang out with a certain kid, that kid is a VIP at mom's house.  She gets a consequence at our house for smoking, she has to talk to her mom about it, and that's it.  
We don't know what to do.  Any suggestions?  Courses of action?